{% extends "layout.html" %}
{% block title %}Pento Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <nav class="sidebar">
        <div class="sidebar-header">
            <img src="{{ url_for('static', filename='images/hacker_logo.png') }}" alt="Pento Logo" class="sidebar-logo">
            <h2>Pento</h2>
        </div>

        <ul id="tools-list" class="tool-list">
            <li><button id="new-scan-btn" class="tool-link green-button">New Scan</button></li>
            <li><button id="dashboard-btn" class="tool-link active">Dashboard</button></li>
            <li><button id="attack-surface-btn" class="tool-link">Attack Surface</button></li>
            <li><button id="findings-btn" class="tool-link">Findings</button></li>
            <li><button id="assets-btn" class="tool-link">Assets</button></li>
            <li><button id="reports-btn" class="tool-link">Reports</button></li>
            <li><button id="chatbot-btn" class="tool-link">Chatbot</button></li>
        </ul>
    </nav>

    <main class="main-content" id="main-content">
        <header class="dashboard-header">
            <h1>Security Operations Center</h1>
            <div class="user-controls">
                <span class="username">{{ current_user.username }}</span>
                <form action="{{ url_for('auth.logout') }}" method="POST" class="logout-form">
                    <button type="submit" class="logout-button">Logout</button>
                </form>
            </div>
        </header>

        <div class="dashboard-grid">
            <div class="grid-item tool-stats">
                <h2>Active Scans</h2>
                <canvas id="active-scans-chart"></canvas>
            </div>
            <div class="grid-item recent-activity">
                <h2>Recent Activity</h2>
                {% if reports %}
                <table>
                    <thead>
                        <tr>
                            <th>Scan Type</th>
                            <th>Target</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for report in reports %}
                        <tr>
                            <td>{{ report.scan_type }}</td>
                            <td>{{ report.target }}</td>
                            <td>{{ report.created_at.strftime("%Y-%m-%d %H:%M:%S") }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p>No recent activity available.</p>
                {% endif %}
            </div>
        </div>

        <div class="attack-surface-summary">
            <h2>Attack Surface Summary</h2>
            <div class="summary-grid">
                <div class="summary-card"><h3 id="ip-address-count">0</h3><p>IP ADDRESS</p></div>
                <div class="summary-card"><h3 id="hostnames-count">0</h3><p>HOSTNAMES</p></div>
                <div class="summary-card"><h3 id="port-count">0</h3><p>PORTS</p></div>
                <div class="summary-card"><h3 id="protocol-count">0</h3><p>PROTOCOLS</p></div>
                <div class="summary-card"><h3 id="services-count">0</h3><p>SERVICES</p></div>
                <div class="summary-card"><h3 id="technologies-count">0</h3><p>TECHNOLOGIES</p></div>
            </div>
        </div>

        
    </main>
</div>


{% endblock %}
